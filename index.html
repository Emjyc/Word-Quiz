<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Vocabulary Quiz Game</title>
<link href="https://fonts.googleapis.com/css2?family=Comic+Neue:wght@700&family=Nico+Moji&family=Quicksand:wght@500;700&display=swap" rel="stylesheet" />
<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
<style>
  * {
    box-sizing: border-box;
  }
  body {
    font-family: 'Comic Neue', 'Quicksand', cursive;
    margin: 0;
    padding: 1.2rem;
    background: radial-gradient(circle at 20px 20px, #ffe3ec 2px, transparent 2px),
                radial-gradient(circle at 60px 60px, #ffe3ec 2px, transparent 2px);
    background-size: 80px 80px;
    background-color: #fff0f5;
    color: #004d40;
    text-align: center;
    min-height: 100vh;
    display: flex;
    flex-direction: column;
    align-items: center;
  }
  h1 {
    margin-bottom: 0.25rem;
    font-weight: 900;
    color: #e91e63;
    font-size: 2.6rem;
    position: relative;
  }
  h1::after {
    content: " ğŸ€";
    display: inline-block;
    animation: sparkle 1.4s infinite;
  }
  @keyframes sparkle {
    0%, 100% { transform: scale(1); opacity: 1; }
    50% { transform: scale(1.2); opacity: 0.6; }
  }
  h2 {
    font-family: 'Nico Moji', monospace;
    font-size: 2.4rem;
    margin: 1.4rem 0 1rem;
    user-select: none;
    color: #ba68c8;
  }
  button {
    font-family: 'Comic Neue', 'Quicksand', cursive;
    background-color: #f06292;
    color: white;
    border: none;
    border-radius: 12px;
    padding: 0.75rem 1.6rem;
    font-size: 1.1rem;
    cursor: pointer;
    transition: background-color 0.3s ease, transform 0.2s ease;
    user-select: none;
    box-shadow: 0 3px 8px rgba(240, 98, 146, 0.4);
    margin: 0.3rem;
  }
  button:hover:not(:disabled) {
    background-color: #ec407a;
    transform: scale(1.08);
  }
  button:disabled {
    background-color: #f8bbd0;
    cursor: default;
    box-shadow: none;
    transform: none;
  }
  button:focus-visible {
    outline: 3px solid #ffd54f;
    outline-offset: 2px;
  }
  input[type="text"] {
    font-family: 'Comic Neue', cursive;
    font-size: 1.15rem;
    padding: 0.6rem 0.9rem;
    border-radius: 10px;
    border: 2px solid #e91e63;
    width: 90%;
    max-width: 360px;
    margin-top: 0.7rem;
    transition: border-color 0.3s;
    background: #fff0f5;
  }
  input[type="text"]:focus {
    border-color: #ff4081;
    outline: none;
  }
  #instructions {
    color: #880e4f;
    font-style: italic;
  }
  #piggy-bank {
    width: 64px;
    height: 54px;
    user-select: none;
    transition: transform 0.35s ease;
    animation: wiggle 1.6s infinite alternate ease-in-out;
  }
  @keyframes wiggle {
    0% { transform: rotate(-2deg); }
    100% { transform: rotate(2deg); }
  }
  .option-btn.correct::after {
    content: " âœ¨";
    font-size: 1.2em;
    animation: pop 0.6s ease;
  }
  @keyframes pop {
    0% { transform: scale(1); opacity: 0; }
    50% { transform: scale(1.3); opacity: 1; }
    100% { transform: scale(1); opacity: 0; }
  }
  .start-screen, .game-screen {
    background: #fff8fb;
    border-radius: 14px;
    box-shadow: 0 8px 22px rgba(233, 30, 99, 0.15);
  }
  #score-container span {
    color: #f06292;
  }
  .coin {
    background: radial-gradient(circle at 13px 13px, #ffd700 0%, #ffb300 100%);
    box-shadow: inset 0 0 9px #fff700, 0 0 6px #ffecb3;
  }
  .option-btn.correct {
    background-color: #ffe0f0;
    color: #e91e63;
    border-color: #f48fb1;
  }
  .option-btn.incorrect {
    background-color: #ffcccb;
    color: #b71c1c;
    border-color: #e57373;
  }
</style>
</head>
<body>

  <!-- Start Screen -->
  <section class="start-screen" id="start-screen" role="main" aria-label="Game start screen">
    <h1>Vocabulary Quiz Game</h1>
    <label for="player-name" style="font-weight:700; font-size:1.1rem; color:#00796b;">Enter your name:</label>
    <input type="text" id="player-name" placeholder="Your name here..." autocomplete="off" aria-required="true" aria-describedby="instructions" />
    <p id="instructions">Choose a vocabulary set to start the 5-minute quiz. Select the English meaning of the Japanese word shown.</p>
    <div id="set-buttons" role="list" aria-label="Vocabulary set selection buttons"></div>
  </section>

  <!-- Game Screen -->
  <section class="game-screen hidden" id="game-screen" role="main" aria-live="polite" aria-atomic="true" aria-label="Game play screen">
    <div id="timer-progress-container" aria-live="off" aria-label="Time remaining and progress bar">
      <div id="progress-container" role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-valuenow="100">
        <div id="progress-bar"></div>
      </div>
      <div id="timer">Time: 05:00</div>
    </div>

    <div id="score-container" aria-live="polite" aria-atomic="true" aria-label="Current money earned">
      Money: <span id="money-amount" aria-live="polite" aria-atomic="true">Â¥0</span>
      <img src="https://cdn-icons-png.flaticon.com/512/616/616408.png" id="piggy-bank" alt="Piggy bank" />
    </div>

    <h2 id="japanese-word" aria-live="polite" aria-atomic="true"></h2>
    <div id="options-container"></div>
  </section>

<script>
  const vocabSets = {
    1: [
      {english:"minute", japanese:"åˆ†"},
      {english:"before", japanese:"ã®å‰ã«"},
      {english:"photography", japanese:"å†™çœŸæ’®å½±"},
      {english:"tournament", japanese:"ãƒˆãƒ¼ãƒŠãƒ¡ãƒ³ãƒˆ"},
      {english:"against", japanese:"ã«å¯¾æŠ—ã—ã¦"},
      {english:"lost", japanese:"è² ã‘ã£ãŸ"},
      {english:"lose", japanese:"è² ã‘ã‚‹"},
      {english:"final", japanese:"æœ€å¾Œã®"},
      {english:"second", japanese:"ç§’"},
      {english:"broke", japanese:"å£Šã—ãŸ"},
      {english:"surely", japanese:"ç¢ºã‹ã«"},
      {english:"until", japanese:"ã€‚ã€‚ã€‚ã¾ã§"},
      {english:"half", japanese:"åŠåˆ†ã®"},
      {english:"hour", japanese:"ï¼‘æ™‚é–“"},
      {english:"tomorrow", japanese:"æ˜æ—¥"},
      {english:"today", japanese:"ä»Šæ—¥"},
      {english:"yesterday", japanese:"æ˜¨æ—¥"},
      {english:"ago", japanese:"ï½å‰ã«"},
      {english:"spread", japanese:"åºƒã‚ã‚‹"},
    ],
    2: [
      {english:"if", japanese:"ã‚‚ã—"},
      {english:"plastic", japanese:"ãƒ—ãƒ©ã‚¹ãƒãƒƒã‚¯"},
      {english:"exam", japanese:"ãƒ†ã‚¹ãƒˆ"},
      {english:"adventure", japanese:"å†’é™º"},
      {english:"read", japanese:"èª­ã‚€"},
      {english:"main", japanese:"ä¸»ãª"},
      {english:"naughty", japanese:"ã„ãŸãšã‚‰ãª"},
      {english:"trouble", japanese:"å¿ƒé…ã€æ‚©ã¿ã€ã‚„ã£ã‹ã„ãªäº‹æ…‹"},
      {english:"lend", japanese:"è²¸ã™"},
      {english:"another", japanese:"ã‚‚ã†ä¸€ã¤ã®"},
    ],
    3: [
      {english:"think", japanese:"è€ƒãˆã‚‹ãƒ»æ€ã†"},
      {english:"author", japanese:"ä½œè€…"},
      {english:"drew", japanese:"æã„ãŸ"},
      {english:"scenery", japanese:"æ™¯è‰²"},
      {english:"in fact", japanese:"ä»Šã¾ã§"},
      {english:"area", japanese:"åœ°åŸŸ"},
      {english:"still", japanese:"ã¾ã "},
      {english:"hope", japanese:"æœ›ã‚€"},
      {english:"someday", japanese:"ã„ã¤ã‹"},
      {english:"how", japanese:"ã©ã†"},
      {english:"borrow", japanese:"å€Ÿã‚Šã‚‹"},
      {english:"fantasy", japanese:"ãƒ•ã‚¡ãƒ³ã‚¿ã‚¸ãƒ¼"},
      {english:"message", japanese:"ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸"},
      {english:"horror", japanese:"ãƒ›ãƒ©ãƒ¼"},
      {english:"novel", japanese:"å°èª¬"},
      {english:"mystery", japanese:"ãƒŸã‚¹ãƒ†ãƒªãƒ¼"},
      {english:"encourage", japanese:"åŠ±ã¾ã™"},
    ],
    4: [
      {english:"finish", japanese:"çµ‚ã‚ã‚‹"},
      {english:"training", japanese:"ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°"},
      {english:"perfect", japanese:"å®Œç’§"},
      {english:"learner", japanese:"å­¦ç¿’è€…"},
      {english:"because", japanese:"ã ã‹ã‚‰ãƒ»ãªã®ã§"},
      {english:"easy", japanese:"å„ªã—ã„ãƒ»ç°¡å˜ãª"},
      {english:"plus", japanese:"ã•ã‚‰ã«ãã®ä¸Š"},
      {english:"teenager", japanese:"ï¼‘ï¼ä»£ã®å°‘å¹´"},
      {english:"among", japanese:"ã®ä¸­ã«ãƒ»ã®é–“ã«"},
      {english:"ending", japanese:"çµ‚ã‚ã‚Š"},
      {english:"town", japanese:"ç”º"},
      {english:"witch", japanese:"é­”å¥³"},
    ],
    5: [
      {english:"famous", japanese:"æœ‰å"},
      {english:"dream", japanese:"å¤¢"},
      {english:"build", japanese:"å»ºã¦ã‚‹"},
      {english:"tower", japanese:"å¡”"},
      {english:"around the world", japanese:"ä¸–ç•Œä¸­"},
      {english:"world", japanese:"ä¸–ç•Œ"},
      {english:"decide", japanese:"æ±ºã‚ã‚‹"},
      {english:"interest", japanese:"èˆˆå‘³"},
      {english:"yourself", japanese:"ã‚ãªãŸè‡ªèº«"},
      {english:"lots of", japanese:"ãŸãã•ã‚“ã®"},
      {english:"bake", japanese:"ç„¼ã"},
      {english:"more", japanese:"ã‚‚ã£ã¨"},
      {english:"perhaps", japanese:"å¤šåˆ†"},
      {english:"bakery", japanese:"ãƒ‘ãƒ³å±‹"},
      {english:"need", japanese:"å¿…è¦"},
    ],
    6: [
      {english:"relax", japanese:"ãã¤ã‚ã"},
      {english:"customer", japanese:"ãŠå®¢ã•ã‚“"},
      {english:"provide", japanese:"æä¾›ã™ã‚‹"},
      {english:"several", japanese:"ã„ãã¤ã‹ã®"},
      {english:"that way", japanese:"ãã®ã‚ˆã†ã«ã—ã¦"},
      {english:"plenty", japanese:"ååˆ†ãª"},
      {english:"choice", japanese:"é¸æŠ"},
      {english:"however", japanese:"ã—ã‹ã—ãªãŒã‚‰"},
      {english:"leftovers", japanese:"æ®‹ã‚Šç‰©ãƒ»é£Ÿã¹æ®‹ã—"},
      {english:"away", japanese:"åˆ¥ã®æ–¹å‘ã¸ãƒ»ã‚ãã¸"},
      {english:"throw away", japanese:"ç„¡é§„ã«ä½¿ã†"},
      {english:"waste", japanese:"ç„¡é§„"},
      {english:"discount", japanese:"å‰²å¼•"},
      {english:"enough", japanese:"ååˆ†ãª"},
      {english:"help", japanese:"åŠ©ã‘ã‚‹"},
    ],
    7: [
      {english:"pool", japanese:"ãƒ—ãƒ¼ãƒ«"},
      {english:"over", japanese:"ã€œä»¥ä¸Š"},
      {english:"review", japanese:"è¦‹ç›´ã™"},
      {english:"rule", japanese:"è¦å‰‡"},
      {english:"kitchen", japanese:"å°æ‰€"},
      {english:"must", japanese:"ã€œã—ãªã‘ã‚Œã°ãªã‚‰ãªã„"},
      {english:"mask", japanese:"ãƒã‚¹ã‚¯"},
      {english:"smartphone", japanese:"ã‚¹ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒ³"},
      {english:"back", japanese:"æˆ»ã‚‹"},
      {english:"return", japanese:"è¿”ã™"},
      {english:"week", japanese:"é€±"},
      {english:"quiet", japanese:"é™ã‹ãª"},
      {english:"future", japanese:"æœªæ¥"},
      {english:"in the future", japanese:"å°†æ¥"},
      {english:"somewhere", japanese:"ã©ã“ã‹ã«"},
      {english:"explore", japanese:"æ¢æ¤œã™ã‚‹"},
      {english:"clothes", japanese:"æœ"},
      {english:"design", japanese:"ãƒ‡ã‚¶ã‚¤ãƒ³"},
      {english:"chef", japanese:"ã‚·ã‚§ãƒ•"},
    ],
    8: [
      {english:"as", japanese:"ã€œã¨ã—ã¦"},
      {english:"behind", japanese:"å¾Œã‚ã«"},
      {english:"cut down", japanese:"åˆ‡ã‚Šå€’ã™"},
      {english:"building", japanese:"å»ºç‰©"},
      {english:"destroy", japanese:"ç ´å£Šã™ã‚‹"},
      {english:"shock", japanese:"è¡æ’ƒ"},
      {english:"environment", japanese:"ç’°å¢ƒ"},
      {english:"guide", japanese:"æ¡ˆå†…ã™ã‚‹"},
      {english:"tour", japanese:"ãƒ„ã‚¢ãƒ¼"},
      {english:"simply", japanese:"å˜ç´”ã«"},
      {english:"nothing", japanese:"ä½•ã‚‚"},
      {english:"worry", japanese:"å¿ƒé…ã™ã‚‹"},
      {english:"decide", japanese:"æ±ºã‚ã‚‹"},
      {english:"major", japanese:"ä¸»è¦ãª"},
      {english:"less", japanese:"ã‚ˆã‚Šå°‘ãªã„"},
      {english:"sell", japanese:"å£²ã‚‹"},
      {english:"sold", japanese:"å£²ã‚‰ã‚ŒãŸ"},
      {english:"knowledge", japanese:"çŸ¥è­˜"},
      {english:"itself", japanese:"ãã‚Œè‡ªèº«"},
      {english:"share", japanese:"å…±æœ‰ã™ã‚‹"},
    ],
    9: [
      {english:"billion", japanese:"ï¼‘ï¼å„„"},
      {english:"than", japanese:"ã€‚ã€‚ã€‚ã‚ˆã‚Šã‚‚"},
      {english:"more than...", japanese:"ã€‚ã€‚ã€‚ã‚ˆã‚Šå¤šãã®"},
      {english:"dirty", japanese:"æ±šã‚Œã‚‹"},
      {english:"directly", japanese:"ç›´æ¥"},
      {english:"pond", japanese:"æ± "},
      {english:"should", japanese:"ã™ã¹ãã§ã‚ã‚‹"},
      {english:"presentation", japanese:"ãƒ—ãƒ¬ã‚¼ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³"},
      {english:"everywhere", japanese:"ã©ã“ã§ã‚‚"},
      {english:"imagine", japanese:"æƒ³åƒã™ã‚‹"},
      {english:"step", japanese:"ä¸€æ­©"},
      {english:"situation", japanese:"äº‹æ…‹"},
      {english:"one of...", japanese:"ã®ä¸€ã¤ãƒ»ä¸€äºº"},
      {english:"collect", japanese:"é›†ã‚ã‚‹"},
      {english:"drinking water", japanese:"é£²ã¿æ°´"},
      {english:"understand", japanese:"ç†è§£ã™ã‚‹"},
      {english:"laundry", japanese:"æ´—æ¿¯ç‰©"},
      {english:"available", japanese:"åˆ©ç”¨ã§ãã‚‹"},
      {english:"post", japanese:"éƒµä¾¿"},
      {english:"store", japanese:"åº—"},
      {english:"office", japanese:"äº‹å‹™æ‰€"},
    ],
    10: [
      {english:"minute", japanese:"åˆ†"},
      {english:"before", japanese:"ã®å‰ã«"},
      {english:"photography", japanese:"å†™çœŸæ’®å½±"},
      {english:"tournament", japanese:"ãƒˆãƒ¼ãƒŠãƒ¡ãƒ³ãƒˆ"},
      {english:"against", japanese:"ã«å¯¾æŠ—ã—ã¦"},
      {english:"lost", japanese:"è² ã‘ã£ãŸ"},
      {english:"lose", japanese:"è² ã‘ã‚‹"},
      {english:"final", japanese:"æœ€å¾Œã®"},
      {english:"second", japanese:"ç§’"},
      {english:"broke", japanese:"å£Šã—ãŸ"},
      {english:"surely", japanese:"ç¢ºã‹ã«"},
      {english:"until", japanese:"ã€‚ã€‚ã€‚ã¾ã§"},
      {english:"half", japanese:"åŠåˆ†ã®"},
      {english:"hour", japanese:"ï¼‘æ™‚é–“"},
      {english:"tomorrow", japanese:"æ˜æ—¥"},
      {english:"today", japanese:"ä»Šæ—¥"},
      {english:"yesterday", japanese:"æ˜¨æ—¥"},
      {english:"ago", japanese:"ï½å‰ã«"},
      {english:"spread", japanese:"åºƒã‚ã‚‹"},
    ],
    11: [
      {english:"kitchen", japanese:"å°æ‰€"},
      {english:"must", japanese:"ã€œã—ãªã‘ã‚Œã°ãªã‚‰ãªã„"},
      {english:"mask", japanese:"ãƒã‚¹ã‚¯"},
      {english:"smartphone", japanese:"ã‚¹ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒ³"},
      {english:"back", japanese:"æˆ»ã‚‹"},
      {english:"return", japanese:"è¿”ã™"},
      {english:"week", japanese:"é€±"},
      {english:"quiet", japanese:"é™ã‹ãª"},
      {english:"future", japanese:"æœªæ¥"},
      {english:"in the future", japanese:"å°†æ¥"},
      {english:"somewhere", japanese:"ã©ã“ã‹ã«"},
      {english:"explore", japanese:"æ¢æ¤œã™ã‚‹"},
      {english:"clothes", japanese:"æœ"},
      {english:"design", japanese:"ãƒ‡ã‚¶ã‚¤ãƒ³"},
      {english:"chef", japanese:"ã‚·ã‚§ãƒ•"},
    ],
    12: [
      {english:"as", japanese:"ã€œã¨ã—ã¦"},
      {english:"behind", japanese:"å¾Œã‚ã«"},
      {english:"cut down", japanese:"åˆ‡ã‚Šå€’ã™"},
      {english:"building", japanese:"å»ºç‰©"},
      {english:"destroy", japanese:"ç ´å£Šã™ã‚‹"},
      {english:"shock", japanese:"è¡æ’ƒ"},
      {english:"environment", japanese:"ç’°å¢ƒ"},
      {english:"guide", japanese:"æ¡ˆå†…ã™ã‚‹"},
      {english:"tour", japanese:"ãƒ„ã‚¢ãƒ¼"},
      {english:"simply", japanese:"å˜ç´”ã«"},
      {english:"nothing", japanese:"ä½•ã‚‚"},
      {english:"worry", japanese:"å¿ƒé…ã™ã‚‹"},
      {english:"decide", japanese:"æ±ºã‚ã‚‹"},
      {english:"major", japanese:"ä¸»è¦ãª"},
      {english:"less", japanese:"ã‚ˆã‚Šå°‘ãªã„"},
      {english:"sell", japanese:"å£²ã‚‹"},
      {english:"sold", japanese:"å£²ã‚‰ã‚ŒãŸ"},
      {english:"knowledge", japanese:"çŸ¥è­˜"},
      {english:"itself", japanese:"ãã‚Œè‡ªèº«"},
      {english:"share", japanese:"å…±æœ‰ã™ã‚‹"},
    ],
    13: [
      {english:"billion", japanese:"ï¼‘ï¼å„„"},
      {english:"than", japanese:"ã€‚ã€‚ã€‚ã‚ˆã‚Šã‚‚"},
      {english:"more than...", japanese:"ã€‚ã€‚ã€‚ã‚ˆã‚Šå¤šãã®"},
      {english:"dirty", japanese:"æ±šã‚Œã‚‹"},
      {english:"directly", japanese:"ç›´æ¥"},
      {english:"pond", japanese:"æ± "},
      {english:"should", japanese:"ã™ã¹ãã§ã‚ã‚‹"},
      {english:"presentation", japanese:"ãƒ—ãƒ¬ã‚¼ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³"},
      {english:"everywhere", japanese:"ã©ã“ã§ã‚‚"},
      {english:"imagine", japanese:"æƒ³åƒã™ã‚‹"},
      {english:"step", japanese:"ä¸€æ­©"},
      {english:"situation", japanese:"äº‹æ…‹"},
      {english:"one of...", japanese:"ã®ä¸€ã¤ãƒ»ä¸€äºº"},
      {english:"collect", japanese:"é›†ã‚ã‚‹"},
      {english:"drinking water", japanese:"é£²ã¿æ°´"},
      {english:"understand", japanese:"ç†è§£ã™ã‚‹"},
      {english:"laundry", japanese:"æ´—æ¿¯ç‰©"},
      {english:"available", japanese:"åˆ©ç”¨ã§ãã‚‹"},
      {english:"post", japanese:"éƒµä¾¿"},
      {english:"store", japanese:"åº—"},
      {english:"office", japanese:"äº‹å‹™æ‰€"},
    ],
    14: [
      {english:"billion", japanese:"ï¼‘ï¼å„„"},
      {english:"than", japanese:"ã€‚ã€‚ã€‚ã‚ˆã‚Šã‚‚"},
      {english:"more than...", japanese:"ã€‚ã€‚ã€‚ã‚ˆã‚Šå¤šãã®"},
      {english:"dirty", japanese:"æ±šã‚Œã‚‹"},
      {english:"directly", japanese:"ç›´æ¥"},
      {english:"pond", japanese:"æ± "},
      {english:"should", japanese:"ã™ã¹ãã§ã‚ã‚‹"},
      {english:"presentation", japanese:"ãƒ—ãƒ¬ã‚¼ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³"},
      {english:"everywhere", japanese:"ã©ã“ã§ã‚‚"},
      {english:"imagine", japanese:"æƒ³åƒã™ã‚‹"},
      {english:"step", japanese:"ä¸€æ­©"},
      {english:"situation", japanese:"äº‹æ…‹"},
      {english:"one of...", japanese:"ã®ä¸€ã¤ãƒ»ä¸€äºº"},
      {english:"collect", japanese:"é›†ã‚ã‚‹"},
      {english:"drinking water", japanese:"é£²ã¿æ°´"},
      {english:"understand", japanese:"ç†è§£ã™ã‚‹"},
      {english:"laundry", japanese:"æ´—æ¿¯ç‰©"},
      {english:"available", japanese:"åˆ©ç”¨ã§ãã‚‹"},
      {english:"post", japanese:"éƒµä¾¿"},
      {english:"store", japanese:"åº—"},
      {english:"office", japanese:"äº‹å‹™æ‰€"},
    ],
    15: [
      {english:"minute", japanese:"åˆ†"},
      {english:"before", japanese:"ã®å‰ã«"},
      {english:"photography", japanese:"å†™çœŸæ’®å½±"},
      {english:"tournament", japanese:"ãƒˆãƒ¼ãƒŠãƒ¡ãƒ³ãƒˆ"},
      {english:"against", japanese:"ã«å¯¾æŠ—ã—ã¦"},
      {english:"lost", japanese:"è² ã‘ã£ãŸ"},
      {english:"lose", japanese:"è² ã‘ã‚‹"},
      {english:"final", japanese:"æœ€å¾Œã®"},
      {english:"second", japanese:"ç§’"},
      {english:"broke", japanese:"å£Šã—ãŸ"},
      {english:"surely", japanese:"ç¢ºã‹ã«"},
      {english:"until", japanese:"ã€‚ã€‚ã€‚ã¾ã§"},
      {english:"half", japanese:"åŠåˆ†ã®"},
      {english:"hour", japanese:"ï¼‘æ™‚é–“"},
      {english:"tomorrow", japanese:"æ˜æ—¥"},
      {english:"today", japanese:"ä»Šæ—¥"},
      {english:"yesterday", japanese:"æ˜¨æ—¥"},
      {english:"ago", japanese:"ï½å‰ã«"},
      {english:"spread", japanese:"åºƒã‚ã‚‹"},
    ],
  };

  let currentSet = null;
  let score = 0;
  const timerDuration = 300;
  let timeLeft = timerDuration;
  let timerInterval = null;
  let currentQuestionIndex = 0;
  let shuffledQuestions = [];
  let playerName = "";

  const startScreen = document.getElementById('start-screen');
  const setButtonsContainer = document.getElementById('set-buttons');
  const playerNameInput = document.getElementById('player-name');
  const gameScreen = document.getElementById('game-screen');
  const timerDisplay = document.getElementById('timer');
  const progressBar = document.getElementById('progress-bar');
  const moneyAmount = document.getElementById('money-amount');
  const piggyBank = document.getElementById('piggy-bank');
  const japaneseWord = document.getElementById('japanese-word');
  const optionsContainer = document.getElementById('options-container');

  function createSetButtons() {
    for(let i=1; i<=15; i++) {
      const btn = document.createElement('button');
      btn.textContent = `Set ${i}`;
      btn.setAttribute('aria-label', `Select vocabulary set ${i}`);
      btn.addEventListener('click', () => {
        playerName = playerNameInput.value.trim();
        if(!playerName) {
          alert('Please enter your name before selecting a set.');
          playerNameInput.focus();
          return;
        }
        startGame(i);
      });
      setButtonsContainer.appendChild(btn);
    }
  }

  function shuffle(array) {
    const arr = array.slice();
    for(let i = arr.length -1; i >0; i--) {
      const j = Math.floor(Math.random() * (i+1));
      [arr[i], arr[j]] = [arr[j], arr[i]];
    }
    return arr;
  }

  function startGame(setNumber) {
    currentSet = vocabSets[setNumber];
    if(!currentSet) {
      alert('Selected vocabulary set is empty.');
      return;
    }
    score = 0;
    timeLeft = timerDuration;
    currentQuestionIndex = 0;
    shuffledQuestions = shuffle(currentSet);
    startScreen.classList.add('hidden');
    gameScreen.classList.remove('hidden');
    updateScore();
    updateTimerDisplay();
    updateProgressBar();
    piggyBank.style.transform = 'scale(1)';
    showQuestion();
    startTimer();
  }

  function showQuestion() {
    if(currentQuestionIndex >= shuffledQuestions.length) {
      endGame();
      return;
    }
    const question = shuffledQuestions[currentQuestionIndex];
    japaneseWord.textContent = question.japanese;

    let options = [question.english];
    let wrongOptions = currentSet.filter(item => item.english !== question.english);
    wrongOptions = shuffle(wrongOptions).slice(0,3).map(item => item.english);
    options = options.concat(wrongOptions);
    options = shuffle(options);

    optionsContainer.innerHTML = '';
    options.forEach(optionText => {
      const btn = document.createElement('button');
      btn.className = 'option-btn';
      btn.textContent = optionText;
      btn.setAttribute('aria-label', `Answer option: ${optionText}`);
      btn.addEventListener('click', () => handleAnswer(btn, question.english));
      optionsContainer.appendChild(btn);
    });
  }

  function handleAnswer(button, correctAnswer) {
    if(button.classList.contains('correct')) return;

    if(button.textContent === correctAnswer) {
      button.classList.add('correct');
      disableOptions();
      addScore(100);
      confetti({
        particleCount: 40,
        spread: 60,
        origin: { y: 0.6 }
      });
      currentQuestionIndex++;
      spawnCoinFromButton(button);
      setTimeout(() => {
        showQuestion();
      }, 900);
    } else {
      button.classList.add('incorrect');
      setTimeout(() => {
        button.classList.remove('incorrect');
      }, 400);
    }
  }

  function disableOptions() {
    const allOptions = document.querySelectorAll('.option-btn');
    allOptions.forEach(btn => {
      btn.disabled = true;
    });
  }

  function updateScore() {
    moneyAmount.textContent = `Â¥${score}`;
    if(score > 0 && score % 500 === 0) {
      piggyBank.style.transform = 'scale(1.3)';
      setTimeout(() => {
        piggyBank.style.transform = 'scale(1)';
      }, 350);
    }
  }

  function addScore(amount) {
    score += amount;
    updateScore();
  }

  function spawnCoinFromButton(button) {
    const coin = document.createElement('div');
    coin.className = 'coin';
    document.body.appendChild(coin);

    const btnRect = button.getBoundingClientRect();
    const bankRect = piggyBank.getBoundingClientRect();

    coin.style.left = (btnRect.left + btnRect.width/2 - 13) + 'px';
    coin.style.top = (btnRect.top + btnRect.height/2 - 13) + 'px';

    // Animate coin to piggy bank position
    const deltaX = bankRect.left + bankRect.width/2 - (btnRect.left + btnRect.width/2);
    const deltaY = bankRect.top + bankRect.height/2 - (btnRect.top + btnRect.height/2);

    coin.animate([
      { transform: 'translate(0, 0) scale(1)', opacity: 1 },
      { transform: `translate(${deltaX}px, ${deltaY}px) scale(0.3)`, opacity: 0 }
    ], {
      duration: 900,
      easing: 'ease-in-out',
      fill: 'forwards'
    });

    setTimeout(() => {
      coin.remove();
    }, 900);
  }

  function updateTimerDisplay() {
    let minutes = Math.floor(timeLeft / 60);
    let seconds = timeLeft % 60;
    timerDisplay.textContent = `Time: ${String(minutes).padStart(2,'0')}:${String(seconds).padStart(2,'0')}`;
  }

  function updateProgressBar() {
    const percent = (timeLeft / timerDuration) * 100;
    progressBar.style.width = percent + '%';
    progressBar.parentElement.setAttribute('aria-valuenow', percent.toFixed(0));
  }

  function timerTick() {
    timeLeft--;
    if(timeLeft < 0) {
      clearInterval(timerInterval);
      endGame();
      return;
    }
    updateTimerDisplay();
    updateProgressBar();
  }

  function startTimer() {
    clearInterval(timerInterval);
    timerInterval = setInterval(timerTick, 1000);
  }

  function endGame() {
    clearInterval(timerInterval);
    japaneseWord.textContent = `Time's up, ${playerName}! You earned Â¥${score}.`;
    optionsContainer.innerHTML = '';
  }

  createSetButtons();
</script>

</body>
</html> 
